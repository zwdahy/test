{=insert name="radio_globaljs" rid=$rid page_title=$page_title=}
<!--顶部通知 begin-->
<div class="notice-wrap">
    <div class="bg-wrap"></div>
    <div class="notice" id="notice">
        <div class="notice-in udv-clearfix">
        </div>
    </div>
</div>
<script type="text/javascript">
    requirejs(['lib'],function(){
        requirejs(['notice','$','_'],function(Notice){
            $(document).ready(function(){
                new Notice({
                    ctr: $("#notice")
                    //speed: 30 //px per second
                });
            });
        });
    });
</script>
<!--顶部通知 end-->
<div class="main-play">
    <div class="wrap list-management" style="padding-top: 90px;">
        <!--顶部导航 begin-->
        {=insert name="radio_head" is_login=$cuid==}
        <!--顶部导航 end-->
        <div class="player-wrap">
            <div id="player"></div>
            <div style="position: absolute;left: -999em;height: 35px;width: 880px;top: 20px;overflow: hidden;" id="flashBox">
                <div id="flashWrap"></div>
            </div>
            <div class="sidebar" id="sidebar">
                <a class="s-item1" href="javascript:;" data-tab="1"></a>
                <a class="s-item2" href="javascript:;" data-tab="2"></a>
                <a class="s-item3" href="javascript:;" data-tab="3"></a>
                <a class="s-item4" href="javascript:;" data-tab="4"></a>
            </div>
            <div class="cover-wrap" id="cover-wrap" style="display: none;">
                <div class="bg-wrap"></div>
                <div class="cw-ctr" data-ctr="1" style="/*display: none;*/" data-init="0">
                    <div class="title udv-clearfix">
                        <span class="t-name">今日节目单： </span>
                    </div>
                    <div class="cover-list">

                    </div>
                </div>
                <div class="cw-ctr" data-ctr="2" style="display: none;" data-init="0">
                    <div class="title udv-clearfix">
                        <span class="t-name">正在播出的节目： </span>
                    </div>
                    <div class="cover-list">

                    </div>
                </div>
                <div class="cw-ctr" data-ctr="3" style="display: none;" data-init="0">
                    <div class="title udv-clearfix">
                        <span class="t-name">热门电台： </span>
                    </div>
                    <div class="cover-list">

                    </div>
                </div>
                <div class="cw-ctr" data-ctr="4" style="display: none;" data-init="0">
                    <div class="title udv-clearfix">
                        <span class="t-name">我收藏的--个电台 </span>
                    </div>
                    <div class="cover-list">

                    </div>
                </div>
                <a class="cw-close" href="javascript:;" data-action="close"></a>
            </div>
        </div>
    </div>
    <div class="wrap col-2-bg udv-clearfix" style="margin-top: 40px;">
        <div class="col-left">
            <div id="saying"></div>
            <div id="publisher"></div>
            <div class="list-switch" id="switch">
                <div class="tabs">
                    <span class="selected" data-type="user_feed">听友说</span>
                    <span data-type="dj_feed">主播说</span>
                </div>
                <div data-ctr="ctr"></div>
            </div>
        </div>
        <div class="col-right">
        {=if $isCurrentDj=}
            <div class="manage-program">
                <a href="{=$smarty.const.RADIO_URL=}/editprogram?rid={=$rid=}" target="_blank">管理节目单</a>
            </div>
        {=/if=}
        {=insert name="radio_play_right" radio_info=$radio_info  dj_info=$dj_info=}
        </div>
    </div>
	<div class="wrap list-management">
    <!--返回顶部 begin-->
    <div class="side-btns" id="side-btns" style="visibility: hidden;bottom: 80px;">
        <a class="back" href="javascript:;"></a>
    </div>
    <div class="side-btns" style="visibility: visible;bottom: 24px;">
        <a class="recommend" href="javascript:;" data-action="side-share">推荐给朋友</a>
    </div>
    <script type="text/javascript">
        requirejs(['lib'],function(){
            requirejs(['component/backToTop'],function(){
                $(document).ready(function(){

                });
            });
        });
    </script>
    <!--返回顶部 end-->
	</div>
</div>

<script type="text/javascript">
    //页面加关注功能
    requirejs(['lib'],function(){
        requirejs(['util/network','util/login','$'],function(network,login){
            var $body=$("body");
            $(document).ready(function(){
                $body.on('click', '[data-action="follow"]',function(e){
                    var $cTarget=$(e.currentTarget);
                    if(!scope.islogin){
                        login.showAtCenter();
                    }
                    network.follow({
                        uid: $cTarget.attr('data-uid')
                    }, function(d){
						 if(d.code=='A00006')
                            $cTarget.replaceWith($('<a class="icon-followed" href="javascript:;"><em></em>已关注</a>'));
                    })
                })
            });
        });
    });
</script>
{=insert name="radio_footer"=}
<script type="text/javascript">
    requirejs(['lib'],function(){
        requirejs(['play/play'],function(){});
		 var isIE = !-[1,];
        if(isIE){
            try{
                var swf = new ActiveXObject('ShockwaveFlash.ShockwaveFlash');
            }
            catch(e){
                var noFalshNode=document.createElement('a');
                noFalshNode.id='noFlash';
                noFalshNode.href='http://get.adobe.com/cn/flashplayer/?no_redirect';
                noFalshNode.target='_blank';
                noFalshNode.innerHTML='<div class="text"><div>';

                var closeNode=document.createElement('a');
                closeNode.className="close";
                closeNode.href="javascript:;";
                noFalshNode.appendChild(closeNode);
                closeNode.onclick=function(){
                    this.parentNode.parentNode.removeChild(this.parentNode);
                };

                document.body.insertBefore(noFalshNode,document.body.firstChild);
            }
        }
        else {
            try{
                var swf = navigator.plugins['Shockwave Flash'];
                if(swf == undefined){
                    var noFalshNode=document.createElement('a');
                    noFalshNode.id='noFlash';
                    noFalshNode.href='http://get.adobe.com/cn/flashplayer/?no_redirect';
                    noFalshNode.target='_blank';
                    noFalshNode.innerHTML='<div class="text"><div>';

                    var closeNode=document.createElement('a');
                    closeNode.className="close";
                    closeNode.href="javascript:;";
                    noFalshNode.appendChild(closeNode);
                    closeNode.onclick=function(){
                        this.parentNode.parentNode.removeChild(this.parentNode);
                    };
                    
                    document.body.insertBefore(noFalshNode,document.body.firstChild);
                }
            }
            catch(e){
                var noFalshNode=document.createElement('a');
                noFalshNode.id='noFlash';
                noFalshNode.href='http://get.adobe.com/cn/flashplayer/?no_redirect';
                noFalshNode.target='_blank';
                noFalshNode.innerHTML='<div class="text"><div>';

                var closeNode=document.createElement('a');
                closeNode.className="close";
                closeNode.href="javascript:;";
                noFalshNode.appendChild(closeNode);
                closeNode.onclick=function(){
                    this.parentNode.parentNode.removeChild(this.parentNode);
                };
                
                document.body.insertBefore(noFalshNode,document.body.firstChild);
            }
        }
    });
</script>
</body>
</html>
